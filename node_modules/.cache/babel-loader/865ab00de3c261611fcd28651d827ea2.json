{"remainingRequest":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\thread-loader\\dist\\cjs.js!F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\babel-loader\\lib\\index.js!F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\src\\views\\Blog\\components\\BlogTOC.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\src\\views\\Blog\\components\\BlogTOC.vue","mtime":1618297353336},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkY6L1dlYnN0cm9tZmlsZXMvXHU1RjU1XHU2NEFEXHU4QkZFXHU3QTBCL1ZVRTIvXHU1MTY1XHU5NUU4L1x1NjQyRFx1NUVGQVx1NURFNVx1N0EwQi9teS1jaXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovV2Vic3Ryb21maWxlcy9cdTVGNTVcdTY0QURcdThCRkVcdTdBMEIvVlVFMi9cdTUxNjVcdTk1RTgvXHU2NDJEXHU1RUZBXHU1REU1XHU3QTBCL215LWNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuYW5jaG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFydGljbGVDYXRhbG9ndWUgZnJvbSAiQC92aWV3cy9CbG9nL2NvbXBvbmVudHMvQXJ0aWNsZUNhdGFsb2d1ZSI7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAiQC91dGlscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQmxvZ1RvYyIsCiAgcHJvcHM6IHsKICAgIHRvYzogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVBbmNob3I6ICJhcnRpY2xlLW1kLXRpdGxlLTEiCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQXJ0aWNsZUNhdGFsb2d1ZTogQXJ0aWNsZUNhdGFsb2d1ZQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvY1dpdGhTZWxlY3Q6IGZ1bmN0aW9uIHRvY1dpdGhTZWxlY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZ2V0VE9DID0gZnVuY3Rpb24gZ2V0VE9DKCkgewogICAgICAgIHZhciB0b2MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICAgIHJldHVybiB0b2MubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgaXNTZWxlY3RlZDogaXRlbS5hbmNob3IgPT09IF90aGlzLmFjdGl2ZUFuY2hvciwKICAgICAgICAgICAgY2hpbGRyZW46IGdldFRPQyhpdGVtLmNoaWxkcmVuKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICByZXR1cm4gZ2V0VE9DKHRoaXMudG9jKTsKICAgIH0sCiAgICAvL+agueaNrnRvY+W+l+WIsOS7luS7rOWvueW6lOeahOWFg+e0oOaVsOe7hAogICAgZG9tczogZnVuY3Rpb24gZG9tcygpIHsKICAgICAgdmFyIGRvbXMgPSBbXTsKCiAgICAgIHZhciBhZGRUb0RvbXMgPSBmdW5jdGlvbiBhZGRUb0RvbXModG9jKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRvYyksCiAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIHQgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgZG9tcy5wdXNoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuYW5jaG9yKSk7CgogICAgICAgICAgICBpZiAodC5jaGlsZHJlbiAmJiB0LmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgIGFkZFRvRG9tcyh0LmNoaWxkcmVuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBhZGRUb0RvbXModGhpcy50b2MpOwogICAgICByZXR1cm4gZG9tczsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNlbGVjdDogZnVuY3Rpb24gaGFuZGxlU2VsZWN0KGl0ZW0pIHsKICAgICAgbG9jYXRpb24uaGFzaCA9IGl0ZW0uYW5jaG9yOwogICAgfSwKICAgIC8v6K6+572uYWN0aXZlQW5jaG9y5Li65q2j56Gu5YC8CiAgICBzZXRTZWxlY3Q6IGZ1bmN0aW9uIHNldFNlbGVjdChzY3JvbGxEb20pIHsKICAgICAgaWYgKCFzY3JvbGxEb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuYWN0aXZlQW5jaG9yID0gIiI7IC8v5ZCO57ut5r+A5rS75YmN6ZyA6KaB5YWI5riF6Zmk5LmL5YmN6K6+572u55qECgogICAgICB2YXIgcmFuZ2UgPSAyMDA7CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZG9tcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZG9tID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgIC8v55yL5LiA5LiL5b2T5YmN6L+Z5LiqZG9t5YWD57Sg5piv5LiN5piv5bqU6K+l6KKr6YCJ5LitCiAgICAgICAgICBpZiAoIWRvbSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gLy/lvpfliLDlhYPntKDnprvop4blj6Ppobbpg6jnmoTot53nprsKCgogICAgICAgICAgdmFyIHRvcCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CgogICAgICAgICAgaWYgKHRvcCA+PSAwICYmIHRvcCA8PSByYW5nZSkgewogICAgICAgICAgICAvL+WcqOinhOWumuiMg+WbtOWGhQogICAgICAgICAgICB0aGlzLmFjdGl2ZUFuY2hvciA9IGRvbS5pZDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIGlmICh0b3AgPiByYW5nZSkgewogICAgICAgICAgICAvL+WcqOinhOWumuiMg+WbtOS4i+aWuQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL+WcqOinhOWumuiMg+WbtOS4iuaWuQogICAgICAgICAgICB0aGlzLmFjdGl2ZUFuY2hvciA9IGRvbS5pZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zZXRTZWxlY3REZWJvdW5jZSA9IGRlYm91bmNlKHRoaXMuc2V0U2VsZWN0LCA1MCk7CiAgICB0aGlzLiRidXMuJG9uKCJtYWluU2Nyb2xsIiwgdGhpcy5zZXRTZWxlY3REZWJvdW5jZSk7CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMuJGJ1cy4kb2ZmKCJtYWluU2Nyb2xsIiwgdGhpcy5zZXRTZWxlY3REZWJvdW5jZSk7CiAgfQp9Ow=="},{"version":3,"sources":["BlogTOC.vue"],"names":[],"mappings":";;;;;;;;;;;;AASA,OAAA,gBAAA,MAAA,0CAAA;AACA,SAAA,QAAA,QAAA,SAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAZA;AAaA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GAbA;AAgBA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,UAAA,MAAA,GAAA,SAAA,MAAA,GAAA;AAAA,YAAA,GAAA,uEAAA,EAAA;AACA,eAAA,GAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,iDACA,IADA;AAEA,YAAA,UAAA,EAAA,IAAA,CAAA,MAAA,KAAA,KAAA,CAAA,YAFA;AAGA,YAAA,QAAA,EAAA,MAAA,CAAA,IAAA,CAAA,QAAA;AAHA;AAAA,SAAA,CAAA;AAKA,OANA;;AAOA,aAAA,MAAA,CAAA,KAAA,GAAA,CAAA;AACA,KAVA;AAWA;AACA,IAAA,IAZA,kBAYA;AACA,UAAA,IAAA,GAAA,EAAA;;AACA,UAAA,SAAA,GAAA,SAAA,SAAA,CAAA,GAAA,EAAA;AAAA,mDACA,GADA;AAAA;;AAAA;AACA,8DAAA;AAAA,gBAAA,CAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,CAAA,CAAA,MAAA,CAAA;;AACA,gBAAA,CAAA,CAAA,QAAA,IAAA,CAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,cAAA,SAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAOA,OAPA;;AAQA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA;AACA,aAAA,IAAA;AACA;AAxBA,GAhBA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,IADA,EACA;AACA,MAAA,QAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA;AACA,KAHA;AAIA;AACA,IAAA,SALA,qBAKA,SALA,EAKA;AACA,UAAA,CAAA,SAAA,EAAA;AACA;AACA;;AACA,WAAA,YAAA,GAAA,EAAA,CAJA,CAIA;;AACA,UAAA,KAAA,GAAA,GAAA;;AALA,kDAMA,KAAA,IANA;AAAA;;AAAA;AAMA,+DAAA;AAAA,cAAA,GAAA;;AACA;AACA,cAAA,CAAA,GAAA,EAAA;AACA;AACA,WAJA,CAKA;;;AACA,cAAA,GAAA,GAAA,GAAA,CAAA,qBAAA,GAAA,GAAA;;AACA,cAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,KAAA,EAAA;AACA;AACA,iBAAA,YAAA,GAAA,GAAA,CAAA,EAAA;AACA;AACA,WAJA,MAIA,IAAA,GAAA,GAAA,KAAA,EAAA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA,iBAAA,YAAA,GAAA,GAAA,CAAA,EAAA;AACA;AACA;AAxBA;AAAA;AAAA;AAAA;AAAA;AAyBA;AA9BA,GA1CA;AA0EA,EAAA,OA1EA,qBA0EA;AACA,SAAA,iBAAA,GAAA,QAAA,CAAA,KAAA,SAAA,EAAA,EAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,YAAA,EAAA,KAAA,iBAAA;AACA,GA7EA;AA8EA,EAAA,SA9EA,uBA8EA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KAAA,iBAAA;AACA;AAhFA,CAAA","sourcesContent":["<!--文章详情页目录-->\r\n<template>\r\n  <div class=\"blog-toc-container\">\r\n    <h2>目录</h2>\r\n    <ArticleCatalogue :list=\"tocWithSelect\" @select=\"handleSelect\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ArticleCatalogue from \"@/views/Blog/components/ArticleCatalogue\";\r\nimport { debounce } from \"@/utils\";\r\n\r\nexport default {\r\n  name: \"BlogToc\",\r\n  props: {\r\n    toc: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n      activeAnchor: \"article-md-title-1\"\r\n    }\r\n  },\r\n  components: {\r\n    ArticleCatalogue\r\n  },\r\n  computed:{\r\n    tocWithSelect(){\r\n      const getTOC = (toc = []) => {\r\n        return toc.map(item => ({\r\n          ...item,\r\n              isSelected: item.anchor === this.activeAnchor,\r\n              children: getTOC(item.children)\r\n          }))\r\n      }\r\n      return getTOC(this.toc);\r\n    },\r\n    //根据toc得到他们对应的元素数组\r\n    doms(){\r\n      const doms = [];\r\n      const addToDoms = toc => {\r\n        for (const t of toc) {\r\n          doms.push(document.getElementById(t.anchor));\r\n          if (t.children && t.children.length){\r\n            addToDoms(t.children);\r\n          }\r\n        }\r\n      }\r\n      addToDoms(this.toc);\r\n      return doms;\r\n    }\r\n  },\r\n  methods: {\r\n    handleSelect(item){\r\n      location.hash = item.anchor\r\n    },\r\n    //设置activeAnchor为正确值\r\n    setSelect(scrollDom){\r\n      if (!scrollDom){\r\n        return;\r\n      }\r\n      this.activeAnchor = \"\";//后续激活前需要先清除之前设置的\r\n      const range = 200;\r\n      for (const dom of this.doms) {\r\n        //看一下当前这个dom元素是不是应该被选中\r\n        if (!dom){\r\n          continue;\r\n        }\r\n        //得到元素离视口顶部的距离\r\n        const top = dom.getBoundingClientRect().top;\r\n        if (top >= 0 && top <= range){\r\n          //在规定范围内\r\n          this.activeAnchor = dom.id;\r\n          return;\r\n        }else if(top > range){\r\n          //在规定范围下方\r\n          return;\r\n        }else{\r\n          //在规定范围上方\r\n          this.activeAnchor = dom.id;\r\n        }\r\n      }\r\n    },\r\n  },\r\n  created(){\r\n    this.setSelectDebounce = debounce(this.setSelect, 50)\r\n    this.$bus.$on(\"mainScroll\", this.setSelectDebounce)\r\n  },\r\n  destroyed() {\r\n    this.$bus.$off(\"mainScroll\", this.setSelectDebounce);\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.blog-toc-container{\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 100%;\r\n  h2{\r\n    font-weight: bold;\r\n    margin: 0;\r\n    font-size: 32px;\r\n    letter-spacing: 2px;\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/views/Blog/components"}]}