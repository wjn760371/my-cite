{"remainingRequest":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\babel-loader\\lib\\index.js!F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\src\\store\\setting.js","dependencies":[{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\src\\store\\setting.js","mtime":1618401052147},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Webstromfiles\\录播课程\\VUE2\\入门\\搭建工程\\my-cite\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1dlYnN0cm9tZmlsZXMvXHU1RjU1XHU2NEFEXHU4QkZFXHU3QTBCL1ZVRTIvXHU1MTY1XHU5NUU4L1x1NjQyRFx1NUVGQVx1NURFNVx1N0EwQi9teS1jaXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBnZXRTZXR0aW5nIH0gZnJvbSAiQC9hcGkvc2V0dGluZyI7CmltcG9ydCB7IHRpdGxlQ29udHJvbGxlciB9IGZyb20gIkAvdXRpbHMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgbG9hZGluZzogZmFsc2UsCiAgICBkYXRhOiBudWxsCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldExvYWRpbmc6IGZ1bmN0aW9uIHNldExvYWRpbmcoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUubG9hZGluZyA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0RGF0YTogZnVuY3Rpb24gc2V0RGF0YShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5kYXRhID0gcGF5bG9hZDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGZldGNoU2V0dGluZzogZnVuY3Rpb24gZmV0Y2hTZXR0aW5nKGN0eCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwLCBsaW5rOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGN0eC5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldFNldHRpbmcoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjdHguY29tbWl0KCJzZXREYXRhIiwgcmVzcCk7CiAgICAgICAgICAgICAgICBjdHguY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmICghcmVzcC5mYXZpY29uKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy88bGluayByZWw9InNob3J0Y3V0IGljb24iIHR5cGU9ImltYWdlcy94LWljb24iIGhyZWY9Ii4vZmF2aWNvbi5pY28iPgogICAgICAgICAgICAgICAgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxpbmtbcmVmPSdzaG9ydGN1dCBpY29uJ10iKTsKCiAgICAgICAgICAgICAgICBpZiAoIWxpbmspIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7CiAgICAgICAgICAgICAgICBsaW5rLnJlbCA9ICJzaG9ydGN1dCBpY29uIjsKICAgICAgICAgICAgICAgIGxpbmsudHlwZSA9ICJpbWFnZXMveC1pY29uIjsKICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IHJlc3AuZmF2aWNvbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKS5hcHBlbmRDaGlsZChsaW5rKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIGlmIChyZXNwLnNpdGVUaXRsZSkgewogICAgICAgICAgICAgICAgICB0aXRsZUNvbnRyb2xsZXIuc2V0U2l0ZVRpdGxlKGN0eC5zdGF0ZS5kYXRhLnNpdGVUaXRsZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/Webstromfiles/录播课程/VUE2/入门/搭建工程/my-cite/src/store/setting.js"],"names":["getSetting","titleController","namespaced","state","loading","data","mutations","setLoading","payload","setData","actions","fetchSetting","ctx","commit","resp","favicon","link","document","querySelector","createElement","rel","type","href","appendChild","siteTitle","setSiteTitle"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,eAA3B;AACA,SAASC,eAAT,QAAgC,SAAhC;AAEA,eAAe;AACXC,EAAAA,UAAU,EAAE,IADD;AAEXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,OAAO,EAAE,KADN;AAEHC,IAAAA,IAAI,EAAE;AAFH,GAFI;AAMXC,EAAAA,SAAS,EAAE;AACPC,IAAAA,UADO,sBACIJ,KADJ,EACWK,OADX,EACmB;AACtBL,MAAAA,KAAK,CAACC,OAAN,GAAgBI,OAAhB;AACH,KAHM;AAIPC,IAAAA,OAJO,mBAICN,KAJD,EAIQK,OAJR,EAIgB;AACnBL,MAAAA,KAAK,CAACE,IAAN,GAAaG,OAAb;AACH;AANM,GANA;AAeXE,EAAAA,OAAO,EAAE;AACCC,IAAAA,YADD,wBACcC,GADd,EACkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,gBAAAA,GAAG,CAACC,MAAJ,CAAW,YAAX,EAAyB,IAAzB;AADmB;AAAA,uBAEAb,UAAU,EAFV;;AAAA;AAEbc,gBAAAA,IAFa;AAGnBF,gBAAAA,GAAG,CAACC,MAAJ,CAAW,SAAX,EAAsBC,IAAtB;AACAF,gBAAAA,GAAG,CAACC,MAAJ,CAAW,YAAX,EAAyB,KAAzB;;AAJmB,qBAKfC,IAAI,CAACC,OALU;AAAA;AAAA;AAAA;;AAMf;AACIC,gBAAAA,IAPW,GAOJC,QAAQ,CAACC,aAAT,CAAuB,2BAAvB,CAPI;;AAAA,qBAQXF,IARW;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAWfA,gBAAAA,IAAI,GAAGC,QAAQ,CAACE,aAAT,CAAuB,MAAvB,CAAP;AACAH,gBAAAA,IAAI,CAACI,GAAL,GAAW,eAAX;AACAJ,gBAAAA,IAAI,CAACK,IAAL,GAAY,eAAZ;AACAL,gBAAAA,IAAI,CAACM,IAAL,GAAYR,IAAI,CAACC,OAAjB;AACAE,gBAAAA,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BK,WAA/B,CAA2CP,IAA3C;;AAfe;AAiBnB,oBAAIF,IAAI,CAACU,SAAT,EAAmB;AACfvB,kBAAAA,eAAe,CAACwB,YAAhB,CAA6Bb,GAAG,CAACT,KAAJ,CAAUE,IAAV,CAAemB,SAA5C;AACH;;AAnBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBtB;AArBI;AAfE,CAAf","sourcesContent":["import { getSetting } from \"@/api/setting\";\r\nimport { titleController } from \"@/utils\";\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state: {\r\n        loading: false,\r\n        data: null,\r\n    },\r\n    mutations: {\r\n        setLoading(state, payload){\r\n            state.loading = payload;\r\n        },\r\n        setData(state, payload){\r\n            state.data = payload;\r\n        }\r\n    },\r\n\r\n    actions: {\r\n        async fetchSetting(ctx){\r\n            ctx.commit(\"setLoading\", true);\r\n            const resp = await getSetting();\r\n            ctx.commit(\"setData\", resp);\r\n            ctx.commit(\"setLoading\", false);\r\n            if (resp.favicon){\r\n                //<link rel=\"shortcut icon\" type=\"images/x-icon\" href=\"./favicon.ico\">\r\n                let link = document.querySelector(\"link[ref='shortcut icon']\");\r\n                if (link){\r\n                    return;\r\n                }\r\n                link = document.createElement(\"link\");\r\n                link.rel = \"shortcut icon\";\r\n                link.type = \"images/x-icon\";\r\n                link.href = resp.favicon;\r\n                document.querySelector(\"head\").appendChild(link);\r\n            }\r\n            if (resp.siteTitle){\r\n                titleController.setSiteTitle(ctx.state.data.siteTitle);\r\n            }\r\n        }\r\n    }\r\n}"]}]}